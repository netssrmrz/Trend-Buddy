<html>

<head>
  <title>Trend Buddy</title>

  <script src="https://www.gstatic.com/firebasejs/3.6.4/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-database.js"></script>

  <script src="/pl-elements/webcomponentsjs/webcomponents-lite.min.js"></script>
  <link rel="import" href="/pl-elements/polymer/polymer.html">
  <link rel="import" href="/pl-elements/paper-drawer-panel/paper-drawer-panel.html">
  <link rel="import" href="/pl-elements/paper-header-panel/paper-header-panel.html">
  <link rel="import" href="/pl-elements/paper-toolbar/paper-toolbar.html">
  <link rel="import" href="/pl-elements/paper-icon-button/paper-icon-button.html">
  <link rel="import" href="/pl-elements/iron-icons/iron-icons.html">
  <link rel="import" href="/pl-elements/paper-toast/paper-toast.html">
  <link rel="import" href="/pl-elements/paper-input/paper-input.html">
  <link rel="import" href="/pl-elements/paper-button/paper-button.html">
  <link rel="import" href="/pl-elements/paper-fab/paper-fab.html">

  <link rel="import" href="/tb/init.html">
  <link rel="import" href="/tb/data.html">
  <link rel="import" href="/tb/trend.html">
  <link rel="import" href="/tb/query.html">
  <link rel="import" href="/tb/indeed.html">

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <style>
    @font-face {
      font-family: roboto;
      src: url(fonts/Roboto-Regular.ttf);
    }

    body {
      font-family: roboto;
    }

    .menu_items {
      margin: 30px 0px 30px 0px;
    }

    .menu_items iron-icon {
      color: #616161;
      margin-right: 20px;
      vertical-align: text-bottom;
    }

    .menu_items a:hover iron-icon {
      color: #00cc00;
    }

    .menu_items a {
      font-weight: 500;
      display: block;
      padding: 15px 30px 15px 30px;
    }

    .menu_items a:hover {
      background-color: #f5f5f5;
      color: #00cc00;
      cursor: pointer;
    }
  </style>

  <script type="text/javascript">
    var db;

    function Main()
    {
      db = new tb.data.Db();
      document.getElementById("upd_option").onclick = On_Update_All;
      document.getElementById("bld_option").onclick = On_Build_Queries;

      List_Query_Items();
    }

    function List_Query_Items()
    {
      tb.query.Select(db, Select_OK);
      function Select_OK(queries)
      {
        var c, list_elem;

        list_elem = document.getElementById("query_items");

        for (c = 0; c < queries.length; c++)
        {
          var item_elem, query;

          query = queries[c];
          item_elem = document.createElement("a");
          item_elem.text = query.title;
          item_elem.query = query;
          //item_elem.onclick = On_Show_Chart;

          list_elem.appendChild(item_elem);
        }
      }
    }

    function On_Build_Queries()
    {
      var query;

      query =
      {
        terms: "java",
        title: "Java"
      };
      tb.query.Insert(db, query, Insert_OK);
      function Insert_OK()
      {
        document.getElementById("qry_ok").show();
      }
    }

    function On_Update_All()
    {
      tb.trend.Insert_From_Queries(db, Insert_From_Queries_OK);
      function Insert_From_Queries_OK()
      {
        document.getElementById("msg_ok").show();
      }
    }

  </script>
</head>

<body>
  <paper-drawer-panel>

    <paper-header-panel drawer>

      <paper-toolbar>
        <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
        <div>Trend Buddy</div>
      </paper-toolbar>

      <div id="query_items" class="menu_items">
      </div>

      <div class="menu_items">
        <a id="bld_option">Build Queries</a>
        <a id="upd_option">Update All</a>
      </div>

    </paper-header-panel>

    <paper-header-panel main>

      <paper-toolbar>
        <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
      </paper-toolbar>

      <paper-input label="Title"></paper-input>
      <paper-input label="Search Terms"></paper-input>
      <paper-button>Save</paper-button>
      <paper-button>Delete</paper-button>
      <paper-fab icon="add" title="Add Search Query"></paper-fab>

    </paper-header-panel>
  </paper-drawer-panel>

  <paper-toast id="msg_ok" text="All trends updated."></paper-toast>
  <paper-toast id="qry_ok" text="Query updated."></paper-toast>

</body>

</html>