<script type="text/javascript">

  var tb =
    {
      web_components_ready: false,

      Req_Json: function (url, success_fn)
      {
        var req;

        req = new XMLHttpRequest();
        req.onreadystatechange = Req_State_Change;
        req.open("GET", url, true);
        req.send();

        function Req_State_Change()
        {
          if (this.readyState == XMLHttpRequest.DONE)
          {
            success_fn(JSON.parse(this.responseText));
          }
        }
      },

      Clr_Child_Elems: function (elem, start)
      {
        tb.Clr_Children(elem, start, Polymer.dom(elem).children);
      },

      Clr_Child_Nodes: function (elem, start)
      {
        tb.Clr_Children(elem, start, Polymer.dom(elem).childNodes);
      },

      Clr_Children: function (elem, start, children)
      {
        var children, c;

        if (start == null)
          start = 0;

        for (c = children.length - 1; c >= start; c--)
          Polymer.dom(elem).removeChild(children[c]);
      },

      Empty: function (obj)
      {
        var res = true;

        if (obj != null && obj.length == null)
          res = false;
        else if (obj != null && obj.length != null && obj.length > 0)
          res = false
        return res;
      },

      Add_Days: function (date, days)
      {
        var new_date = new Date(date.valueOf());
        new_date.setDate(new_date.getDate() + days);
        return new_date;
      },

      Polyfills: function ()
      {
        if (!String.prototype.repeat)
        {
          String.prototype.repeat = function (count)
          {
            'use strict';
            if (this == null)
            {
              throw new TypeError('can\'t convert ' + this + ' to object');
            }
            var str = '' + this;
            count = +count;
            if (count != count)
            {
              count = 0;
            }
            if (count < 0)
            {
              throw new RangeError('repeat count must be non-negative');
            }
            if (count == Infinity)
            {
              throw new RangeError('repeat count must be less than infinity');
            }
            count = Math.floor(count);
            if (str.length == 0 || count == 0)
            {
              return '';
            }
            // Ensuring count is a 31-bit integer allows us to heavily optimize the
            // main part. But anyway, most current (August 2014) browsers can't handle
            // strings 1 << 28 chars or longer, so:
            if (str.length * count >= 1 << 28)
            {
              throw new RangeError('repeat count must not overflow maximum string size');
            }
            var rpt = '';
            for (; ;)
            {
              if ((count & 1) == 1)
              {
                rpt += str;
              }
              count >>>= 1;
              if (count == 0)
              {
                break;
              }
              str += str;
            }
            // Could we try:
            // return Array(count + 1).join(this);
            return rpt;
          }
        }
      },

      WebComponentsReady: function ()
      {
        if (!tb.web_components_ready)
        {
          tb.web_components_ready = true;
          Main();
        }
      }
    };

  window.addEventListener('WebComponentsReady', tb.WebComponentsReady);

  </script>